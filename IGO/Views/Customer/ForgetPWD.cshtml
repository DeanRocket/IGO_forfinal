@model IGO.Models.TCustomer


<div class="tab-content  container-md py-5">
    <div class="border">
        <div class="card-header bg-dark">
            <h1 class="text-primary">修改密碼</h1>
        </div>
        <div class="border-top-0">
            <div class="bg-white shadow" style="padding: 35px;">
                <form asp-action="ForgetPWD" name="editform">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="form-group">
                        <input type="hidden" name="customerid" value="@Model.FCustomerId" />
                        <label asp-for="FPassword" class="control-label">新密碼</label>
                        <input type="password" class="form-control" name="FPassword" id="inputPwd" />
                    </div>
                    <br />
                    <div class="form-group">
                        <label class="control-label">確認密碼</label>
                        <input type="password" class="form-control" id="checkPwd" />
                    </div>
                    <br />
                    <div class="form-group">
                        <input type="submit" value="確認修改" class="btn btn-primary" id="send" />
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@*Bottom*@
<div class="container newsletter mt-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="row justify-content-center">
        <div @*class="col-lg-10 border rounded p-1"*@>
            <div @*class="border rounded text-center p-1"*@>
                <div class="bg-transparent rounded text-center p-5">
                    <h4 class="mb-4">@*Subscribe Our*@ <span class="text-primary text-uppercase">@*Newsletter*@</span></h4>
                    <div @*class="position-relative mx-auto"*@ style="max-width: 400px;">
                        @*<input class="form-control w-100 py-3 ps-4 pe-5" type="text" placeholder="Enter your email">
                            <button type="button" class="btn btn-primary py-2 px-3 position-absolute top-0 end-0 mt-2 me-2">Submit</button>*@
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@*Bottom*@


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script>
        let send = document.querySelector("#send");


        send.addEventListener("click", async function (event) {
            event.preventDefault();

            let editForm = new FormData(document.editform)
            let check = document.querySelector("#checkPwd")
            let input = document.querySelector("#inputPwd")

            console.log(check.value)
            console.log(input.value)

            if (check.value != input.value) {
                alert("密碼不相符");
            } else {
                let jresult = await fetch('ForgetPWD', {
                    body: editForm,
                    method: "POST",
                })
                let result = await jresult.json();

                if (result == true) {
                    alert("密碼修改成功");
                    window.location.href = "/Home/Home";
                } else {
                    alert(result);
                }


            }

            /**/

            /**/
        })

    </script>


}
